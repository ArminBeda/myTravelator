<!DOCTYPE html>
<!--
Copyright Â© 2018 Dennis Schulmeister-Zimolong

E-Mail: dhbw@windows3.de
Webseite: https://www.wpvs.de/

Dieser Quellcode ist lizenziert unter einer
Creative Commons Namensnennung 4.0 International Lizenz.
-->
<html>
    <head>
        <title>RESTClient MyTravelator</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, height=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="form.css">
        <link rel="stylesheet" href="style.css">

        <script src="UserResource.js"></script>
        <script src="TripResource.js"></script>
    </head>
    <body>
        <h1>REST-Client MyTravelator</h1>

        <!-- Felder, um einen neuen Song anzulegen -->
        
            <div class="column">
                <label class="label" for="new_song_name">Username:</label>
                <div class="side-by-side">
                    <input type="text" id="username">
                </div>

                <div class="side-by-side">
                    <button id="searchbtn" onclick="reloadUser()">
                        Suchen
                    </button>
                </div>
                
                <div class="side-by-side">
                    <button id="searchbtn" onclick="reloadTrip()">
                        Suchen
                    </button>
                </div>
            </div>
        

        <!-- Platzhalter fÃ¼r Entity user, trip, country -->
        <div id="user"></div>
        
        <div id="trip"></div>
        
        <div id="country"></div> 
        
        <!-- Ab hier fÃ¤ngt es an, SpaÃŸ zu machen ðŸ¤© -->
        <script>
            userResource = new UserResource();

            // Speichern eines neuen Users
            let reloadUser = async () => {
                let response = await userResource.getUser( );

                if ("exception" in response) {
                    alert(`[${response.exception}]: ${response.message}`)
                } else {
                    let usersElement = document.getElementById("user");
                    
                    usersElement.innerHTML = "";
                    response.forEach(user => {
                        // Empfangene Daten anzeigen
                        let userElement = document.createElement("div");
                        userElement.classList.add("user");
                        usersElement.appendChild(userElement);
                        userElement.innerHTML = `<b>${user.username}</b> <br/>`;
                    });
                }
            };
        </script>
        
        <script>
            tripResource = new TripResource();
            
            // Speichern eines neuen Users
            let reloadTrip = async () => {
                let response = await tripResource.getTrip( );

                if ("exception" in response) {
                    alert(`[${response.exception}]: ${response.message}`)
                } else {
                    let tripsElement = document.getElementById("trip");
                    
                    tripsElement.innerHTML = "";
                    response.forEach(trip => {
                        // Empfangene Daten anzeigen
                        let tripElement = document.createElement("div");
                        tripElement.classList.add("user");
                        tripsElement.appendChild(tripElement);
                        tripElement.innerHTML = `<b>${trip.city}</b> <br/>`;
                    });
                }
            };
        </script>
    </body>
</html>
